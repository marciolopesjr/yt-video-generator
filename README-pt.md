<div align="center">
<h1 align="center">MoneyPrinterTurbo üí∏</h1>

<p align="center">
  <a href="https://github.com/harry0703/MoneyPrinterTurbo/stargazers"><img src="https://img.shields.io/github/stars/harry0703/MoneyPrinterTurbo.svg?style=for-the-badge" alt="Stargazers"></a>
  <a href="https://github.com/harry0703/MoneyPrinterTurbo/issues"><img src="https://img.shields.io/github/issues/harry0703/MoneyPrinterTurbo.svg?style=for-the-badge" alt="Issues"></a>
  <a href="https://github.com/harry0703/MoneyPrinterTurbo/network/members"><img src="https://img.shields.io/github/forks/harry0703/MoneyPrinterTurbo.svg?style=for-the-badge" alt="Forks"></a>
  <a href="https://github.com/harry0703/MoneyPrinterTurbo/blob/main/LICENSE"><img src="https://img.shields.io/github/license/harry0703/MoneyPrinterTurbo.svg?style=for-the-badge" alt="License"></a>
</p>

<h3>Portugu√™s | <a href="README.md">ÁÆÄ‰Ωì‰∏≠Êñá</a> | <a href="README-en.md">English</a></h3>

<div align="center">
  <a href="https://trendshift.io/repositories/8731" target="_blank"><img src="https://trendshift.io/api/badge/repositories/8731" alt="harry0703%2FMoneyPrinterTurbo | Trendshift" style="width: 250px; height: 55px;" width="250" height="55"/></a>
</div>

Basta fornecer um <b>t√≥pico</b> ou <b>palavra-chave</b> para um v√≠deo, e ele ir√° gerar automaticamente o roteiro, materiais de v√≠deo, legendas e m√∫sica de fundo antes de sintetizar um v√≠deo curto de alta defini√ß√£o.

### WebUI

![](docs/webui-en.jpg)

### Interface da API

![](docs/api.jpg)

</div>

## Agradecimentos Especiais üôè

Devido √† **implanta√ß√£o** e **uso** deste projeto, existe um certo n√≠vel de dificuldade para alguns usu√°rios iniciantes. Gostar√≠amos de expressar nossos agradecimentos especiais a

**RecCloud (Plataforma de Servi√ßos Multim√≠dia com IA)** por fornecer um servi√ßo gratuito de `Gerador de V√≠deo com IA` baseado neste projeto. Ele permite o uso online sem a necessidade de implanta√ß√£o, o que √© muito conveniente.

- Vers√£o em Chin√™s: https://reccloud.cn
- Vers√£o em Ingl√™s: https://reccloud.com

![](docs/reccloud.com.jpg)

## Agradecimentos pelo Patroc√≠nio üôè

Agradecimentos ao Picwish https://picwish.com por apoiar e patrocinar este projeto, permitindo atualiza√ß√µes e manuten√ß√µes cont√≠nuas.

O Picwish foca no campo de **processamento de imagem**, fornecendo um rico conjunto de **ferramentas de processamento de imagem** que simplificam extremamente opera√ß√µes complexas, tornando o processamento de imagem verdadeiramente mais f√°cil.

![picwish.jpg](docs/picwish.com.jpg)

## Funcionalidades üéØ

- [x] Arquitetura **MVC** completa, c√≥digo com **estrutura clara**, f√°cil de manter, suporta tanto `API` quanto `interface Web`
- [x] Suporta roteiro de v√≠deo **gerado por IA**, bem como **roteiro personalizado**
- [x] Suporta v√°rios tamanhos de v√≠deo em **alta defini√ß√£o**
    - [x] Retrato 9:16, `1080x1920`
    - [x] Paisagem 16:9, `1920x1080`
- [x] Suporta **gera√ß√£o de v√≠deo em lote**, permitindo a cria√ß√£o de m√∫ltiplos v√≠deos de uma vez, para ent√£o selecionar o mais satisfat√≥rio
- [x] Suporta a configura√ß√£o da **dura√ß√£o dos clipes de v√≠deo**, facilitando ajustes na frequ√™ncia de troca de material
- [x] Suporta roteiros de v√≠deo em **Chin√™s** e **Ingl√™s**
- [x] Suporta s√≠ntese de **m√∫ltiplas vozes**, com **pr√©-visualiza√ß√£o em tempo real** dos efeitos
- [x] Suporta **gera√ß√£o de legendas**, com `fonte`, `posi√ß√£o`, `cor`, `tamanho` ajust√°veis, e tamb√©m suporta `contorno de legenda`
- [x] Suporta **m√∫sica de fundo**, aleat√≥ria ou arquivos de m√∫sica especificados, com `volume da m√∫sica de fundo` ajust√°vel
- [x] As fontes de material de v√≠deo s√£o de **alta defini√ß√£o** e **livres de royalties**, e voc√™ tamb√©m pode usar seus pr√≥prios **materiais locais**
- [x] Suporta integra√ß√£o com v√°rios modelos como **OpenAI**, **Moonshot**, **Azure**, **gpt4free**, **one-api**, **Qwen**, **Google Gemini**, **Ollama**, **DeepSeek**, **ERNIE**, **Pollinations** e mais

### Planos Futuros üìÖ

- [ ] Suporte para dublagem com GPT-SoVITS
- [ ] Otimizar a s√≠ntese de voz usando modelos grandes para uma sa√≠da de voz mais natural e rica em emo√ß√µes
- [ ] Adicionar efeitos de transi√ß√£o de v√≠deo para uma experi√™ncia de visualiza√ß√£o mais suave
- [ ] Adicionar mais fontes de material de v√≠deo, melhorar a correspond√™ncia entre materiais de v√≠deo e roteiro
- [ ] Adicionar op√ß√µes de dura√ß√£o do v√≠deo: curto, m√©dio, longo
- [ ] Suportar mais provedores de s√≠ntese de voz, como OpenAI TTS
- [ ] Automatizar o upload para a plataforma YouTube

## Demonstra√ß√µes em V√≠deo üì∫

### Retrato 9:16

<table>
<thead>
<tr>
<th align="center"><g-emoji class="g-emoji" alias="arrow_forward">‚ñ∂Ô∏è</g-emoji> Como Adicionar Divers√£o √† Sua Vida </th>
<th align="center"><g-emoji class="g-emoji" alias="arrow_forward">‚ñ∂Ô∏è</g-emoji> Qual √© o Sentido da Vida</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><video src="https://github.com/harry0703/MoneyPrinterTurbo/assets/4928832/a84d33d5-27a2-4aba-8fd0-9fb2bd91c6a6"></video></td>
<td align="center"><video src="https://github.com/harry0703/MoneyPrinterTurbo/assets/4928832/112c9564-d52b-4472-99ad-970b75f66476"></video></td>
</tr>
</tbody>
</table>

### Paisagem 16:9

<table>
<thead>
<tr>
<th align="center"><g-emoji class="g-emoji" alias="arrow_forward">‚ñ∂Ô∏è</g-emoji> Qual √© o Sentido da Vida</th>
<th align="center"><g-emoji class="g-emoji" alias="arrow_forward">‚ñ∂Ô∏è</g-emoji> Por Que se Exercitar</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><video src="https://github.com/harry0703/MoneyPrinterTurbo/assets/4928832/346ebb15-c55f-47a9-a653-114f08bb8073"></video></td>
<td align="center"><video src="https://github.com/harry0703/MoneyPrinterTurbo/assets/4928832/271f2fae-8283-44a0-8aa0-0ed8f9a6fa87"></video></td>
</tr>
</tbody>
</table>

## Requisitos do Sistema üì¶

- Recomendado no m√≠nimo 4 n√∫cleos de CPU ou mais, 4G de mem√≥ria ou mais, GPU n√£o √© necess√°ria
- Windows 10 ou MacOS 11.0, e suas vers√µes posteriores

## In√≠cio R√°pido üöÄ

### Executar no Google Colab
Quer experimentar o MoneyPrinterTurbo sem configurar um ambiente local? Execute-o diretamente no Google Colab!

[![Open in Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/harry0703/MoneyPrinterTurbo/blob/main/docs/MoneyPrinterTurbo.ipynb)


### Windows

Google Drive (v1.2.6): https://drive.google.com/file/d/1HsbzfT7XunkrCrHw5ncUjFX8XX4zAuUh/view?usp=sharing

Ap√≥s o download, √© recomend√°vel **dar um duplo clique** em `update.bat` primeiro para atualizar para o **c√≥digo mais recente**, depois dar um duplo clique em `start.bat` para iniciar

Ap√≥s o lan√ßamento, o navegador abrir√° automaticamente (se abrir em branco, √© recomend√°vel usar **Chrome** ou **Edge**)

### Outros Sistemas

Pacotes de inicializa√ß√£o com um clique ainda n√£o foram criados. Veja a se√ß√£o **Instala√ß√£o e Implanta√ß√£o** abaixo. Recomenda-se o uso de **docker** para a implanta√ß√£o, que √© mais conveniente.

## Instala√ß√£o e Implanta√ß√£o üì•

### Pr√©-requisitos

#### ‚ë† Clone o Projeto

```shell
git clone https://github.com/harry0703/MoneyPrinterTurbo.git
```

#### ‚ë° Modifique o Arquivo de Configura√ß√£o

- Copie o arquivo `config.example.toml` e renomeie-o para `config.toml`
- Siga as instru√ß√µes no arquivo `config.toml` para configurar `pexels_api_keys` e `llm_provider`, e de acordo com o provedor de servi√ßos do llm_provider, configure a API Key correspondente

### Implanta√ß√£o com Docker üê≥

#### ‚ë† Inicie o Cont√™iner Docker

Se voc√™ n√£o instalou o Docker, instale-o primeiro https://www.docker.com/products/docker-desktop/
Se voc√™ estiver usando um sistema Windows, consulte a documenta√ß√£o da Microsoft:

1. https://learn.microsoft.com/en-us/windows/wsl/install
2. https://learn.microsoft.com/en-us/windows/wsl/tutorials/wsl-containers

```shell
cd MoneyPrinterTurbo
docker-compose up
```

> Nota: A vers√£o mais recente do docker instalar√° automaticamente o docker compose na forma de um plug-in, e o comando de inicializa√ß√£o √© ajustado para `docker compose up`

#### ‚ë° Acesse a Interface Web

Abra seu navegador e visite http://0.0.0.0:8501

#### ‚ë¢ Acesse a Interface da API

Abra seu navegador e visite http://0.0.0.0:8080/docs Ou http://0.0.0.0:8080/redoc

### Implanta√ß√£o Manual üì¶

#### ‚ë† Crie um Ambiente Virtual Python

Recomenda-se criar um ambiente virtual Python usando [conda](https://conda.io/projects/conda/en/latest/user-guide/install/index.html)

```shell
git clone https://github.com/harry0703/MoneyPrinterTurbo.git
cd MoneyPrinterTurbo
conda create -n MoneyPrinterTurbo python=3.11
conda activate MoneyPrinterTurbo
pip install -r requirements.txt
```

#### ‚ë° Instale o ImageMagick

###### Windows:

- Baixe https://imagemagick.org/script/download.php Escolha a vers√£o para Windows, certifique-se de selecionar a vers√£o da **biblioteca est√°tica**, como ImageMagick-7.1.1-32-Q16-x64-**static**.exe
- Instale o ImageMagick baixado, **n√£o altere o caminho de instala√ß√£o**
- Modifique o arquivo de configura√ß√£o `config.toml`, defina `imagemagick_path` para o seu caminho de instala√ß√£o real

###### MacOS:

```shell
brew install imagemagick
````

###### Ubuntu

```shell
sudo apt-get install imagemagick
```

###### CentOS

```shell
sudo yum install ImageMagick
```

#### ‚ë¢ Inicie a Interface Web üåê

Note que voc√™ precisa executar os seguintes comandos no `diret√≥rio raiz` do projeto MoneyPrinterTurbo

###### Windows

```bat
webui.bat
```

###### MacOS ou Linux

```shell
sh webui.sh
```

Ap√≥s o lan√ßamento, o navegador abrir√° automaticamente

#### ‚ë£ Inicie o Servi√ßo da API üöÄ

```shell
python main.py
```

Ap√≥s o lan√ßamento, voc√™ pode visualizar a `documenta√ß√£o da API` em http://127.0.0.1:8080/docs e testar diretamente a interface online para uma experi√™ncia r√°pida.

## S√≠ntese de Voz üó£

Uma lista de todas as vozes suportadas pode ser visualizada aqui: [Lista de Vozes](./docs/voice-list.txt)

2024-04-16 v1.1.2 Adicionadas 9 novas vozes de s√≠ntese de voz do Azure que requerem configura√ß√£o de API KEY. Essas vozes soam mais realistas.

## Gera√ß√£o de Legendas üìú

Atualmente, existem 2 maneiras de gerar legendas:

- **edge**: Velocidade de gera√ß√£o mais r√°pida, melhor desempenho, sem requisitos espec√≠ficos para a configura√ß√£o do computador, mas a qualidade pode ser inst√°vel
- **whisper**: Velocidade de gera√ß√£o mais lenta, desempenho inferior, requisitos espec√≠ficos para a configura√ß√£o do computador, mas qualidade mais confi√°vel

Voc√™ pode alternar entre eles modificando o `subtitle_provider` no arquivo de configura√ß√£o `config.toml`

Recomenda-se usar o modo `edge` e mudar para o modo `whisper` se a qualidade das legendas geradas n√£o for satisfat√≥ria.

> Nota:
>
> 1. No modo whisper, voc√™ precisa baixar um arquivo de modelo do HuggingFace, com cerca de 3GB de tamanho, por favor, garanta uma boa conectividade com a internet
> 2. Se deixado em branco, significa que nenhuma legenda ser√° gerada.

> Como o HuggingFace n√£o √© acess√≠vel na China, voc√™ pode usar os seguintes m√©todos para baixar o arquivo do modelo `whisper-large-v3`

Links para download:

- Baidu Netdisk: https://pan.baidu.com/s/11h3Q6tsDtjQKTjUu3sc5cA?pwd=xjs9
- Quark Netdisk: https://pan.quark.cn/s/3ee3d991d64b

Ap√≥s baixar o modelo, extraia-o e coloque todo o diret√≥rio em `.\MoneyPrinterTurbo\models`,
O caminho final do arquivo deve ser assim: `.\MoneyPrinterTurbo\models\whisper-large-v3`

```
MoneyPrinterTurbo
  ‚îú‚îÄmodels
  ‚îÇ   ‚îî‚îÄwhisper-large-v3
  ‚îÇ          config.json
  ‚îÇ          model.bin
  ‚îÇ          preprocessor_config.json
  ‚îÇ          tokenizer.json
  ‚îÇ          vocabulary.json
```

## M√∫sica de Fundo üéµ

A m√∫sica de fundo para os v√≠deos est√° localizada no diret√≥rio `resource/songs` do projeto.
> O projeto atual inclui algumas m√∫sicas padr√£o de v√≠deos do YouTube. Se houver problemas de direitos autorais, por favor, exclua-as.

## Fontes das Legendas üÖ∞

As fontes para renderizar as legendas dos v√≠deos est√£o localizadas no diret√≥rio `resource/fonts` do projeto, e voc√™ tamb√©m pode adicionar suas pr√≥prias fontes.

## Perguntas Frequentes ü§î

### ‚ùìRuntimeError: No ffmpeg exe could be found

Normalmente, o ffmpeg ser√° baixado e detectado automaticamente.
No entanto, se o seu ambiente tiver problemas que impe√ßam downloads autom√°ticos, voc√™ pode encontrar o seguinte erro:

```
RuntimeError: No ffmpeg exe could be found.
Install ffmpeg on your system, or set the IMAGEIO_FFMPEG_EXE environment variable.
```

Neste caso, voc√™ pode baixar o ffmpeg de https://www.gyan.dev/ffmpeg/builds/, descompact√°-lo e definir `ffmpeg_path` para o seu caminho de instala√ß√£o real.

```toml
[app]
# Por favor, defina de acordo com o seu caminho real, note que os separadores de caminho do Windows s√£o \\
ffmpeg_path = "C:\\Users\\harry\\Downloads\\ffmpeg.exe"
```

### ‚ùìImageMagick is not installed on your computer

[issue 33](https://github.com/harry0703/MoneyPrinterTurbo/issues/33)

1. Siga o `endere√ßo de download` fornecido na `configura√ß√£o de exemplo` para instalar https://imagemagick.org/archive/binaries/ImageMagick-7.1.1-30-Q16-x64-static.exe, usando a biblioteca est√°tica
2. N√£o instale em um caminho com caracteres chineses para evitar problemas imprevis√≠veis

[issue 54](https://github.com/harry0703/MoneyPrinterTurbo/issues/54#issuecomment-2017842022)

Para sistemas Linux, voc√™ pode instal√°-lo manualmente, consulte https://cn.linux-console.net/?p=16978

Agradecimentos a [@wangwenqiao666](https://github.com/wangwenqiao666) por sua pesquisa e explora√ß√£o

### ‚ùìA pol√≠tica de seguran√ßa do ImageMagick impede opera√ß√µes relacionadas ao arquivo tempor√°rio @/tmp/tmpur5hyyto.txt

Voc√™ pode encontrar essas pol√≠ticas no arquivo de configura√ß√£o do ImageMagick policy.xml.
Este arquivo geralmente est√° localizado em /etc/ImageMagick-`X`/ ou um local semelhante no diret√≥rio de instala√ß√£o do ImageMagick.
Modifique a entrada que cont√©m `pattern="@"`, altere `rights="none"` para `rights="read|write"` para permitir opera√ß√µes de leitura e escrita em arquivos.

### ‚ùìOSError: [Errno 24] Too many open files

Este problema √© causado pelo limite do sistema no n√∫mero de arquivos abertos. Voc√™ pode resolv√™-lo modificando o limite de arquivos abertos do sistema.

Verifique o limite atual:

```shell
ulimit -n
```

Se for muito baixo, voc√™ pode aument√°-lo, por exemplo:

```shell
ulimit -n 10240
```

### ‚ùìFalha no download do modelo Whisper, com o seguinte erro

LocalEntryNotfoundEror: Cannot find an appropriate cached snapshotfolderfor the specified revision on the local disk and
outgoing trafic has been disabled.
To enablerepo look-ups and downloads online, pass 'local files only=False' as input.

ou

An error occured while synchronizing the model Systran/faster-whisper-large-v3 from the Hugging Face Hub:
An error happened while trying to locate the files on the Hub and we cannot find the appropriate snapshot folder for the
specified revision on the local disk. Please check your internet connection and try again.
Trying to load the model directly from the local cache, if it exists.

Solu√ß√£o: [Clique para ver como baixar manualmente o modelo do netdisk](#gera√ß√£o-de-legendas-)

## Feedback e Sugest√µes üì¢

- Voc√™ pode enviar um [issue](https://github.com/harry0703/MoneyPrinterTurbo/issues) ou um [pull request](https://github.com/harry0703/MoneyPrinterTurbo/pulls).

## Licen√ßa üìù

Clique para ver o arquivo [`LICENSE`](LICENSE)

## Hist√≥rico de Estrelas

[![Star History Chart](https://api.star-history.com/svg?repos=harry0703/MoneyPrinterTurbo&type=Date)](https://star-history.com/#harry0703/MoneyPrinterTurbo&Date)
